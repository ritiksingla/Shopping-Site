<%- include('../includes/head.ejs') %>
</head>

<body>
    <div class="container" style="margin-bottom: 10px;">
        <ul class="nav nav-pills">
            <li class="nav-item">
                <a class="<%= path === '/user/dashboard' ? 'active' : '' %> nav-link" href="/user/dashboard">Shop</a>
            </li>
            <li class="nav-item">
                <a class="<%= path === '/user/cart' ? 'active' : '' %> nav-link" href="/user/cart">Cart</a>
            </li>
            <li class="nav-item">
                <a class="<%= path === '/user/order' ? 'active' : '' %> nav-link" href="/user/order">Orders</a>
            </li>
            <li class="nav-item">
                <a class="<%= path === '/user/logout' ? 'active' : '' %> nav-link" href="/user/logout">Logout</a>
            </li>
        </ul>
    </div>
    <% if (products.length > 0) { %>
    <div class="container card-columns">
        <% products.forEach(p => { %>
        <div class="card">
            <div class="card-body">
                <h4 class="card-text text-center"><%= p.productData.title %></h4>
                <p class="text-center">Quantity: <%= p.qty %></p>
                <form action="/user/cart/delete" method="POST">
                    <input type="hidden" value="<%= p.productData._id %>" name="productId">
                    <button class="btn btn-danger form-control" type="submit">Delete</button>
                </form>
            </div>
        </div>
        <% }) %>
    </div>
    <div class="container col-md-4 col-md-offset-4 row-md-offset-4">
        <div class="row">
            <div class="col-md-6">
                <p class="text-info">Total Items: <%= totalQuantity %></p>
            </div>
            <div class="col-md-6">
                <p class="text-info">Total Price: $ <%= totalPrice %></p>
            </div>
        </div>
        <hr />
        <form action="/user/checkout" method="POST">
            <button class="btn btn-success form-control">Checkout</button>
        </form>
    </div>
    <% } else { %>
    <div class="jumbotron container">
        <h1>No Products In The Cart!</h1>
        <p>Add products to the cart from our shop.</p>
    </div>
    <% } %>
</body>

</html>